{% extends "finance/base.html" %}
{% load static %}

{% block title %}
    <title>Просмотр транзакции «{{ transaction_storage.title }}»</title>
{% endblock %}

{% block links %}
    <script src="/"></script>
    <link rel="stylesheet" type="text/css" href={% static "/css/get_transaction_storage_single.css" %}>
{% endblock %}

{% block content %}
    <main>
        <div class="card center out">
            <h2 class="card-header">Транзакция «{{ transaction_storage.title }}»"</h2>
            <div class="card-item">
                <label>
                    <textarea disabled rows="10" class="value">{{ transaction_storage.description }}</textarea>
                </label>
            </div>
            <div class="card-item">
                <p class="value">{{ transaction_storage.date }}</p>
            </div>
            {% if transaction_storage.time is not None %}
                <div class="card-item">
                    <p class="value">{{ transaction_storage.time }}</p>
                </div>
            {% endif %}
            <div class="card-item">
                <p class="value">
                    {% if transaction_storage.frequency is not None %}
                        {{ transaction_storage.frequency }}
                    {% else %}
                        Единоразовая
                    {% endif %}
                </p>
            </div>
            <div class="card-item">
                <p class="value">{{ transaction_storage.value }}</p>
            </div>
            <div class="card-item">
                <p class="value">
                    {% if transaction_storage.is_confirmed %}
                        Всегда подтверждено
                    {% else %}
                        Требует подтверждения
                    {% endif %}
                </p>
            </div>

            <div class="">
                <h3 class="">Ближайшие исполнения</h3>


                <form method="post" class="card center in">
                    {% csrf_token %}
                    <h4 class="" form-header>{{ date_range_form.form_name }}</h4>
                    <div class="">{{ date_range_form.start_date }}
                        {{ date_range_form.end_date }}</div>
                    <div class="card-footer">
                        <button type="submit" class="btn">{{ date_range_form.button_text }}</button>
                    </div>
                </form>


                <div class="card scroll">
                    <ul>
                        {% for item in transactions %}
                            <li class="card subcard ul-item">
                                <p>{{ item.execution_date }}
                                    {{ item.value }}
                                    {% if item.is_confirmed %}
                                        Да</p>
                                    {% else %}
                                        Не</p>
                                    {% endif %}
                                <a class="btn edit-btn"
                                   href="/finance/transaction/add?trstid={{ item.storage.id }}&trstornu={{ item.storage_order_number }}">Изм</a>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
        {#        <div class="hover">#}
        {#            <a class="btn" href="/finance/transaction-storage/add?id={{ transaction.id }}">Изменить</a>#}
        {#        </div>#}
    </main>
{% endblock %}
